> 2025-07-28 [🎵](https://www.youtube.com/watch?v=8QPyFlJNmus)
> 

---

# Study

---

# Problem Solving

---

# Project

## Feelory

### Spring Security 기반 OAuth2 구현

- 기존의 웹 클라이언트 기반을 갈아엎고 스프링 시큐리티로 구현
- 전에 했던거 보다 이게 훨씬 편하고 쉽다. 전에는 어째서 그렇게 했었는지…
- 다음 부분에 어느정도 신경을 썼다.
    - OAuthService와 SuccessHandler 에서 DB에 데이터를 저장할 경우
        - SRP 위반 문제가 있다. (유저를 생성하는건 이녀석들의 책임이 아님)
        - 트랜잭션 원자성 관련 문제가 있다. (각각에서 유저와 DB를 저장하게 되면, 중간에 예외가 발생했을때 유저만 저장)
    - 따라서 AuthService 에서 유저의 생성과 JWT 토큰 발급 → 저장 로직을 하게 했다. 별거 아니지만 거창하게 파사드 패턴이라고 하자.
- 보안에 관하여
    - URL 기반 보안은 **DispatcherServlet 실행 이전** 이라서, 만들어놓은 공통 응답 반환 로직이나 전역 예외처리를 해줄 수 없고 직접 오브잭트 매퍼로 json 만들어서 결과 던져줘야 했다. 다소 귀찮음.
    - 반면 메서드 수준의 보안은 **DispatcherServlet 실행 이후** 라고 한다. 따라서 전역 예외 처리에서 충분히 예외를 처리할 수 있었다. 꽤나 편함.
    - 둘다 쓰는게 좋다 하더이다.
- 결국 스프링 시큐리티는 세션이 기본이기 떄문에~ JWT로 다시 구현을 조금 더 해줘야 원하는 모양이 나올듯 하다.

---

# etc.

---
