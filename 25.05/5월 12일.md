> 2025-05-12
> 

---

# Study

---

# Problem Solving

---

# Project

## WCCG

### S3 연결, 파일 업로드

- S3 연동을 위해 먼저 S3 버킷 생성 → IAM 계정 생성 및 S3 권한 부여 → 액세스 키/비밀 키를 프로퍼티에 등록 → 프로퍼티 값을 바인딩하는 `S3Properties` 클래스를 작성하는 사전작업.
    - AWS SDK V1을 사용할 경우, 스프링부트에서 자동으로 자격 증명과 설정이 바인딩되어 편리하다.
    - 그러나 AWS SDK V2의 `S3Client`를 직접 사용했기 때문에 해당 자동 설정은 적용되지 않았고 오히려 별도의 설정이 필요했다.
        - 스프링부트의 `S3AutoConfiguration`이 간섭을 일으켜, 이를 명시적으로 제외해야 하는 번거로움…
- 파일을 받아서, 그걸 유효성 검증하고, s3 에 올린다음 링크를 반환.
    - UUID 는 자바 자체 라이브러리로 쉽게 가능했다.
    - 어디서 온 요청이냐에 따라 다른 경로를 지정해야 하므로, 파일 업로드 타입에 관한 Enum 을 만들어서 컨트롤러에서 다르게 값을 던지면. 같은 방식으로 경로를 지정해 s3에 담게하니까 아주 좋다.
    - 확장자는 따로 파일의 원본이름에서 추출 해줘야 했다. 약~간 귀찮다.
- 지금은 사이즈를 100*100만 클라이언트에 올려서 받기로 되어있는데, 나중에 프론트엔드가 리사이징 해서 서버로 던져주는것을 기대하고 있다.

---

# etc.

---
